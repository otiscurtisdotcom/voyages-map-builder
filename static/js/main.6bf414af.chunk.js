(this["webpackJsonpvoyages-map-builder"]=this["webpackJsonpvoyages-map-builder"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var o,r=n(1),a=n.n(r),c=n(9),l=n.n(c),i=(n(16),n(10)),s=n(6),u=n(3),f=function(t,e){var n=function(t){return e.flat().some((function(e){return t.col===e.col&&t.row===e.row}))},o=[];return o.push([t[10][0]],[t[10][2]],[t[10][4]],[t[10][6]],[t[10][8]]),e.splice(3,1),e.forEach((function(e){var r=[],a=e[Math.floor(Math.random()*e.length)];r.push(a);var c=function(){return a.row>18?t[a.row-2][a.col]:a.row<2||n(t[a.row+2][a.col])?t[a.row+2][a.col]:t[a.row-2][a.col]},l=Math.random()>.5?function(){var e=a.row>19?a.row-1:a.row+1,o=a.col>7?a.col-1:a.row%2?a.col:a.col+1;if(n(t[e][o]))return t[e][o]}():c();l||(l=c()),r.push(l),o.push(r)})),o[6][0].col>3?o.push([t[1][3]]):o.push([t[2][5]]),o[9][0].col>3?o.push([t[19][3]]):o.push([t[18][5]]),o};!function(t){t.BARREL="barrel",t.FRUIT="fruit",t.GEM="gem",t.HIDE="hide",t.SAILOR="sailor",t.RELIC="relic",t.SPICE="spice"}(o||(o={}));var h=function(t,e){var n=e/29,a=Object(r.useState)(),c=Object(u.a)(a,2),l=c[0],i=c[1],h=Object(r.useState)(null),d=Object(u.a)(h,2),v=d[0],b=d[1],w=Object(r.useState)(),g=Object(u.a)(w,2),m=g[0],p=g[1],j=Object(r.useState)(),O=Object(u.a)(j,2),I=O[0],y=O[1],S=new Image,M=new Image;Object(r.useEffect)((function(){t.current&&t.current.getContext("2d")&&b(t.current.getContext("2d")),i(function(){for(var t=[],e=0;e<21;e++){for(var n=e%2?10:9,o=[],r=0;r<n;r++){var a={show:!0,row:e,col:r};o.push(a)}t.push(o)}return t[0][0].show=!1,t[1][0].show=!1,t[0][8].show=!1,t[1][9].show=!1,t[19][0].show=!1,t[20][0].show=!1,t[19][9].show=!1,t[20][8].show=!1,t}())}),[]),Object(r.useEffect)((function(){l&&p(function(t){return[[t[0][1],t[1][1],t[1][2],t[2][0],t[2][1],t[3][0],t[3][1],t[3][2],t[4][0],t[4][1],t[5][0],t[5][1],t[6][0]],[t[0][3],t[0][4],t[1][3],t[1][4],t[1][5],t[2][3],t[2][4],t[2][5],t[3][4],t[3][5],t[4][3],t[4][4],t[4][5]],[t[0][7],t[1][7],t[1][8],t[2][6],t[2][7],t[2][8],t[3][7],t[3][8],t[3][9],t[4][7],t[4][8],t[5][8],t[6][8]],[t[8][4],t[9][4],t[9][5],t[10][4],t[11][4],t[11][5],t[12][4]],[t[14][0],t[15][0],t[15][1],t[16][0],t[16][1],t[17][0],t[17][1],t[17][2],t[18][0],t[18][1],t[19][1],t[19][2],t[20][1]],[t[16][3],t[16][4],t[17][3],t[17][4],t[17][5],t[18][3],t[18][4],t[18][5],t[19][3],t[19][4],t[19][5],t[20][3],t[20][4],t[20][5]],[t[14][8],t[15][8],t[16][7],t[16][8],t[17][7],t[17][8],t[18][6],t[18][7],t[18][8],t[19][7],t[19][8],t[20][7]]]}(l))}),[l]),Object(r.useEffect)((function(){if(m&&l){var t,e=m.flat(),n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.sevenSeas=!0}}catch(o){n.e(o)}finally{n.f()}y(f(l,m))}}),[m]),Object(r.useEffect)((function(){if(I){var t,e=I.flat(),n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.island=!0}}catch(o){n.e(o)}finally{n.f()}E(),x(),P(),S.src="".concat("/voyages-map-builder","/img/tile.png"),M.src="".concat("/voyages-map-builder","/img/seven-seas-tile.png")}}),[I]),S.onload=function(){M.onload=function(){R()}};var E=function(){var t=I;null===t||void 0===t||t.splice(2,1);var e=Math.floor(3*Math.random());t&&(t[e][0].start=!0)},x=function(){var t,e,n=I;null===(t=n)||void 0===t||t.splice(5,8),n=null===(e=n)||void 0===e?void 0:e.filter((function(t){return!t[0].start}));var o=Math.floor(3*Math.random());n&&(n[o][0].dread=!0)},P=function(){for(var t=l.flat(),e=0,n=[o.BARREL,o.FRUIT,o.GEM,o.HIDE,o.RELIC,o.SAILOR,o.SPICE];e<n.length;e++)for(var r=n[e],a=0;a<3;){var c=t[Math.floor(Math.random()*t.length)];!c.show||c.hexItems||c.dread||c.island||c.start||(c.hexItems=r,a++)}},R=function(){if(v){var t,e=Object(s.a)(l.entries());try{for(e.s();!(t=e.n()).done;)for(var o=Object(u.a)(t.value,2),r=o[0],a=o[1],c=r%2,i=c?10:9,f=function(t){var e=a[t],o=n,l=c?t*(3*o)+o:t*(3*o)+2.5*o,i=r*(.86*o)+o;v.save(),v.beginPath(),v.moveTo(l+o*Math.cos(0),i+o*Math.sin(0));for(var s=1;s<=6;s++)v.lineTo(l+o*Math.cos(2*s*Math.PI/6),i+o*Math.sin(2*s*Math.PI/6));v.closePath(),v.strokeStyle="#000000",v.lineWidth=1,v.fillStyle="#33ddee",v.strokeStyle="#1188AA",v.lineWidth=1;var u=v.createPattern(S,"repeat");u&&(v.fillStyle=u);var f=v.createPattern(M,"repeat");if(e.sevenSeas&&f&&(v.fillStyle=f),e.island&&(v.fillStyle="#ddcc33"),e.dread&&(v.fillStyle="#ff0000"),e.start&&(v.fillStyle="#eedd99"),e.show&&(v.stroke(),v.fill()),e.hexItems){var h=new Image;h.src="".concat("/voyages-map-builder","/img/").concat(e.hexItems,".png"),h.onload=function(){v.drawImage(h,l-n,i-n,2*n,2*n)}}},h=0;h<i;h++)f(h)}catch(d){e.e(d)}finally{e.f()}}};return v},d=n(2),v=1600,b=function(){var t=Object(r.useRef)(null),e=t.current;h(t,v),Object(r.useEffect)((function(){e&&e.getContext("2d")}),[e]);return Object(d.jsxs)("div",{className:"content",children:[Object(d.jsx)("canvas",{ref:t,width:v,height:1056}),Object(d.jsx)("button",{onClick:function(){var e=new i.a({orientation:"landscape",unit:"mm",format:[297,210]});e.text("Rory is cool",10,10),t.current&&(e.addImage(t.current,"PNG",58,37,180,135),e.save("tester.pdf"))},children:"Save as PDF"})]})},w=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,181)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),o(t),r(t),a(t),c(t)}))};l.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),w()}},[[18,1,3]]]);
//# sourceMappingURL=main.6bf414af.chunk.js.map