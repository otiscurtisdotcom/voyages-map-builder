(this["webpackJsonpvoyages-map-builder"]=this["webpackJsonpvoyages-map-builder"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var o,r=n(1),a=n.n(r),c=n(9),s=n.n(c),l=(n(16),n(10)),i=n(6),f=n(3),u=function(t,e){var n=function(t){return e.flat().some((function(e){return t.col===e.col&&t.row===e.row}))},o=[];return o.push([t[10][0]],[t[10][2]],[t[10][4]],[t[10][6]],[t[10][8]]),e.splice(3,1),e.forEach((function(e){var r=[],a=e[Math.floor(Math.random()*e.length)];r.push(a);var c=function(){return a.row>18?t[a.row-2][a.col]:a.row<2||n(t[a.row+2][a.col])?t[a.row+2][a.col]:t[a.row-2][a.col]},s=Math.random()>.5?function(){var e=a.row>19?a.row-1:a.row+1,o=a.col>7?a.col-1:a.row%2?a.col:a.col+1;if(n(t[e][o]))return t[e][o]}():c();s||(s=c()),r.push(s),o.push(r)})),o[6][0].col>3?o.push([t[1][3]]):o.push([t[2][5]]),o[9][0].col>3?o.push([t[19][3]]):o.push([t[18][5]]),o};!function(t){t.BARREL="barrel",t.FRUIT="fruit",t.SPICE="spice",t.HIDE="hide",t.GEM="gem",t.SAILOR="sailor"}(o||(o={}));var h=function(t){var e=Object(r.useState)(),n=Object(f.a)(e,2),a=n[0],c=n[1],s=Object(r.useState)(null),l=Object(f.a)(s,2),h=l[0],d=l[1],v=Object(r.useState)(),b=Object(f.a)(v,2),w=b[0],j=b[1],p=Object(r.useState)(),O=Object(f.a)(p,2),m=O[0],g=O[1];Object(r.useEffect)((function(){t.current&&t.current.getContext("2d")&&d(t.current.getContext("2d")),c(function(){for(var t=[],e=0;e<21;e++){for(var n=e%2?10:9,o=[],r=0;r<n;r++){var a={show:!0,row:e,col:r};o.push(a)}t.push(o)}return t[0][0].show=!1,t[1][0].show=!1,t[0][8].show=!1,t[1][9].show=!1,t[19][0].show=!1,t[20][0].show=!1,t[19][9].show=!1,t[20][8].show=!1,t}())}),[]),Object(r.useEffect)((function(){a&&j(function(t){return[[t[0][1],t[1][1],t[1][2],t[2][0],t[2][1],t[3][0],t[3][1],t[3][2],t[4][0],t[4][1],t[5][0],t[5][1],t[6][0]],[t[0][3],t[0][4],t[1][3],t[1][4],t[1][5],t[2][3],t[2][4],t[2][5],t[3][4],t[3][5],t[4][3],t[4][4],t[4][5]],[t[0][7],t[1][7],t[1][8],t[2][6],t[2][7],t[2][8],t[3][7],t[3][8],t[3][9],t[4][7],t[4][8],t[5][8],t[6][8]],[t[8][4],t[9][4],t[9][5],t[10][4],t[11][4],t[11][5],t[12][4]],[t[14][0],t[15][0],t[15][1],t[16][0],t[16][1],t[17][0],t[17][1],t[17][2],t[18][0],t[18][1],t[19][1],t[19][2],t[20][1]],[t[16][3],t[16][4],t[17][3],t[17][4],t[17][5],t[18][3],t[18][4],t[18][5],t[19][3],t[19][4],t[19][5],t[20][3],t[20][4],t[20][5]],[t[14][8],t[15][8],t[16][7],t[16][8],t[17][7],t[17][8],t[18][6],t[18][7],t[18][8],t[19][7],t[19][8],t[20][7]]]}(a))}),[a]),Object(r.useEffect)((function(){if(w&&a){var t,e=w.flat(),n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.sevenSeas=!0}}catch(o){n.e(o)}finally{n.f()}g(u(a,w))}}),[w]),Object(r.useEffect)((function(){if(m){var t,e=m.flat(),n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.island=!0}}catch(o){n.e(o)}finally{n.f()}I(),S(),M(),y()}}),[m]);var I=function(){var t=m;null===t||void 0===t||t.splice(2,1);var e=Math.floor(3*Math.random());t&&(t[e][0].start=!0)},S=function(){var t,e,n=m;null===(t=n)||void 0===t||t.splice(5,8),n=null===(e=n)||void 0===e?void 0:e.filter((function(t){return!t[0].start}));var o=Math.floor(3*Math.random());n&&(n[o][0].dread=!0)},M=function(){for(var t=a.flat(),e=0,n=[o.BARREL,o.FRUIT,o.GEM,o.HIDE,o.SAILOR,o.SPICE];e<n.length;e++)for(var r=n[e],c=0;c<3;){var s=t[Math.floor(Math.random()*t.length)];!s.show||s.hexItems||s.dread||s.island||s.start||(s.hexItems=r,c++)}},y=function(){if(h){var t,e=Object(i.a)(a.entries());try{for(e.s();!(t=e.n()).done;)for(var n=Object(f.a)(t.value,2),o=n[0],r=n[1],c=o%2,s=c?10:9,l=function(t){var e=r[t],n=25,a=c?75*t+n:75*t+62.5,s=21.5*o+n;h.beginPath(),h.moveTo(a+n*Math.cos(0),s+n*Math.sin(0));for(var l=1;l<=6;l++)h.lineTo(a+n*Math.cos(2*l*Math.PI/6),s+n*Math.sin(2*l*Math.PI/6));if(h.strokeStyle="#000000",h.lineWidth=1,h.fillStyle="#33ddee",e.sevenSeas&&(h.fillStyle="#99eeff"),e.island&&(h.fillStyle="#ddcc33"),e.dread&&(h.fillStyle="#ff0000"),e.start&&(h.fillStyle="#eedd99"),e.show&&(h.stroke(),h.fill()),e.hexItems){var i=new Image;i.src="".concat("/voyages-map-builder","/").concat(e.hexItems,".png"),i.onload=function(){h.drawImage(i,a-10,s-14,18,26)}}h.restore()},u=0;u<s;u++)l(u)}catch(d){e.e(d)}finally{e.f()}}};return h},d=n(2),v=function(){var t=Object(r.useRef)(null),e=t.current;h(t),Object(r.useEffect)((function(){e&&e.getContext("2d")}),[e]);return Object(d.jsxs)("div",{className:"content",children:[Object(d.jsx)("canvas",{ref:t,width:800,height:600}),Object(d.jsx)("button",{onClick:function(){var e=new l.a({orientation:"landscape",unit:"mm",format:[297,210]});e.text("Rory is cool",10,10),t.current&&(e.addImage(t.current,"PNG",58,37,180,135),e.save("tester.pdf"))},children:"Save as PDF"})]})},b=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,181)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),o(t),r(t),a(t),c(t)}))};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root")),b()}},[[18,1,3]]]);
//# sourceMappingURL=main.a49e9a47.chunk.js.map